<!DOCTYPE html>
<html>
<head>
    <title>Постеры</title>
    <style>
        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }

        .poster {
            width: 48%;
            margin-bottom: 20px;
            position: relative;
        }

        .poster img {
            width: 100%;
            height: auto;
            border-radius: 15px;
    border: 1px solid white;
    box-shadow: 0px 5px 50px -7px #5c009f;
        }

        .poster .overlay {
            position: absolute;
            bottom: 0;
            width: 100%;
            background: linear-gradient(transparent, rgb(0, 0, 0));
            padding: 70% 0 10px 0;
            color: #ffffff;
            display: flex;
            flex-direction: column;
            align-items: center; /* Выравниваем текст по центру горизонтально */
            text-align: center; /* Выравниваем текст по центру горизонтально */
            border-radius: 15px;
        }

        .poster .title {
            font-size: 35px;
            font-weight: bold;
/*             margin-bottom: 5px; */
            margin: 0px 5px 5px 5px;
            /*white-space: nowrap;  Запрещаем перенос текста */
            overflow: hidden; /* Скрываем лишний текст, который может выходить за границы */
            text-overflow: ellipsis; /* Добавляем многоточие для обрезанного текста */
            margin-top: auto; /* Прижимаем к нижней части блока */
        }

        .poster .rating {
            font-size: 32px;
            margin: 0px 10px;
            /*white-space: nowrap;  Запрещаем перенос текста */
            overflow: hidden; /* Скрываем лишний текст, который может выходить за границы */
            text-overflow: ellipsis; /* Добавляем многоточие для обрезанного текста */
        }

        /* Удаляем стили для описания и кнопки */
/*         .poster .description,
        .poster .button {
            display: none;
        } */
    </style>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>

  <div class="container" id="container"></div>

    <div class="container">
        <div class="poster">
            <img src="https://st.kp.yandex.net/images/film_big/1219177.jpg" alt="Человек-паук">
            <div class="overlay">
                <div class="title">Человек-паук: Паутина вселенных</div>
                <div class="rating">⭐️ KP: 8.6 / IMDb: 8.9</div>
            </div>
        </div>
        <div class="poster">
            <img src="https://st.kp.yandex.net/images/film_big/1219177.jpg" alt="Человек-паук">
            <div class="overlay">
                <div class="title">Человек-паук: Паутина вселенных</div>
                <div class="rating">⭐️ KP: 8.6 / IMDb: 8.9</div>
            </div>
        </div>
        <div class="poster">
            <img src="https://st.kp.yandex.net/images/film_big/1219177.jpg" alt="Человек-паук">
            <div class="overlay">
                <div class="title">Человек-паук: Паутина вселенных</div>

                <div class="rating">⭐️ KP: 8.6 / IMDb: 8.9</div>
            </div>
        </div>
        <div class="poster">
            <img src="https://st.kp.yandex.net/images/film_big/1219177.jpg" alt="Человек-паук">
            <div class="overlay">
                <div class="title">Человек-паук: Паутина вселенных</div>
                <div class="rating">⭐️ KP: 8.6 / IMDb: 8.9</div>
            </div>
        </div>
        <!-- Добавьте аналогичные блоки для остальных постеров здесь -->
    </div>
<script type="text/javascript">
function handleResponse(response) {
  // Обработка полученного ответа от Google Apps Script
  console.log(response);
    var html = '';
      // var response = JSON.parse(response);
      console.log(response.length);
for (var key in response) {
  var id = response[key][0];
  var id_kp = response[key][1];
  var movieTitle = response[key][3];
  var year = response[key][4];
  var quality = response[key][5];
  var kpRating = response[key][6];  
  var imdbRating = response[key][7];
  var imageUrl = "https://st.kp.yandex.net/images/film_iphone/iphone360_"+id_kp+".jpg";
  var urlMovie = "https://eltigre001kz.github.io/player.html?video=//harsh-building.cdnmovies-stream.online/content/"+id+"/iframe?domain=searchwatch.bot";
  // Генерируем HTML для каждой записи
  var movieHTML = '<div class="poster">' +
                   '<a href="' + urlMovie + '" target="_blank"><img src="' + imageUrl + '" alt="' + movieTitle + '">' +
                  '<div class="overlay">' +
                  '<div class="title">' + movieTitle + ' ('+year+'/'+quality+')</div>' +
                  '<div class="rating">⭐️ KP: ' + kpRating + ' / IMDb: ' + imdbRating + '</div>' +
                  '</div>' +
                  '</a>' +
                  '</div>';

  // Вставляем сгенерированный HTML в элемент с id "container"
  document.getElementById('container').innerHTML += movieHTML;
}
   
console.log(movieHTML);
    // Вставка HTML в элемент с id "container"
    // document.getElementById('container').innerHTML = html;
}

function makeRequest() {
  // Создание скрипта элемента
 var currentURL = window.location.href;
var url = new URL(currentURL);
var searchParams = url.search.slice(1).split('&');
var listName = null;
for (var i = 0; i < searchParams.length; i++) {
  var param = searchParams[i].split('=');
  if (param[0] === 'listName') {
    listName = param[1];
    console.log(listName);
    break;
  }
}
  var script = document.createElement('script');
  script.src = 'https://script.google.com/macros/s/AKfycbw2hdsepGfDiOVJQp2YqJfQBS21X2uzDA-5zg02hdLQ3YQu-W_myWs_Q28QdR_BUVE/exec?listName='+listName+'&callback=handleResponse';
  document.body.appendChild(script);
}
    window.onload = makeRequest;

</script>
    
<!-- <script type="text/javascript">
// Получаем параметр 'listName' из текущего URL
var currentURL = window.location.href;
var url = new URL(currentURL);
var searchParams = url.search.slice(1).split('&');
var listName = null;
for (var i = 0; i < searchParams.length; i++) {
  var param = searchParams[i].split('=');
  if (param[0] === 'listName') {
    listName = param[1];
    console.log(listName);
    break;
  }
}

// Проверяем, есть ли параметр 'listName' в URL
if (listName) {
  // Формируем URL для Google Apps Script с параметром 'listName'
  var scriptURL = 'https://script.google.com/macros/s/AKfycbw2hdsepGfDiOVJQp2YqJfQBS21X2uzDA-5zg02hdLQ3YQu-W_myWs_Q28QdR_BUVE/exec?listName=' + encodeURIComponent(listName);

  // Отправить параметр в Google Script
fetch(scriptURL)
  .then(function(response) {
    return response.json(); // Предположим, что скрипт возвращает JSON
  })
  .then(function(data) {
    // Цикл для парсинга данных и создания HTML
      
     var html = '';
      // var data = JSON.parse(data);
      console.log(data.length);
      console.log(data);
for (var key in data) {
  var id = data[key][0];
  var id_kp = data[key][1];
  var movieTitle = data[key][3];
  var year = data[key][4];
  var quality = data[key][5];
  var kpRating = data[key][6];  
  var imdbRating = data[key][7];
  var imageUrl = "https://st.kp.yandex.net/images/film_iphone/iphone360_"+id_kp+".jpg";
  var urlMovie = "https://eltigre001kz.github.io/player.html?video=//harsh-building.cdnmovies-stream.online/content/"+id+"/iframe?domain=searchwatch.bot";
  // Генерируем HTML для каждой записи
  var movieHTML = '<div class="poster">' +
                   '<a href="' + urlMovie + '" target="_blank"><img src="' + imageUrl + '" alt="' + movieTitle + '">' +
                  '<div class="overlay">' +
                  '<div class="title">' + movieTitle + ' ('+year+'/'+quality+')</div>' +
                  '<div class="rating">⭐️ KP: ' + kpRating + ' / IMDb: ' + imdbRating + '</div>' +
                  '</div>' +
                  '</a>' +
                  '</div>';

  // Вставляем сгенерированный HTML в элемент с id "container"
  document.getElementById('container').innerHTML += movieHTML;
}
   
console.log(movieHTML);
    // Вставка HTML в элемент с id "container"
    // document.getElementById('container').innerHTML = html;
  })
  .catch(function(error) {
    console.error('Произошла ошибка:', error);
  });

    
}
    
</script> -->
</body>
</html>
